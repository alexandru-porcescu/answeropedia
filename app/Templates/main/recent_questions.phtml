<?php if (isset($this->top_questions) && count($this->top_questions)) : ?>

    <div class="border p-3 bg-white">
        <?= $this->translator->get('main', 'top_content', 'title') ?>
        <a class="float-right text-black-50 text-decoration-none" href="#">
            <?= $this->translator->get('main', 'top_content', 'view_all') ?>
        </a>
    </div>

    <?php foreach ($this->top_questions as $topQuestion) : ?>

        <?php $question = $topQuestion['question'] ?>
        <?php $categories = $topQuestion['categories'] ?>
        <?php $contributors = $topQuestion['contributors'] ?>
        <?php $last_contributor = $topQuestion['last_contributor'] ?>

        <!-- question item -->
        <div class="border rounded bg-white p-3 my-4">

            <?php if (count($categories)) : ?>
                <?php foreach ($categories as $category) : ?>
                    <a class="small text-black-50 text-decoration-none" href="<?= $category->get_URL($this->lang) ?>">
                        <?= $category->title ?>
                    </a>
                    <span class="semi-small text-black-50">
                        &middot;
                    </span>
                <?php endforeach; ?>
                <a class="small text-black-50 text-decoration-none" href="<?= $question->get_URL($this->lang) ?>">
                    <?= $this->translator->get('main', 'item__top_question', 'more') ?>
                </a>
            <?php endif; ?>

            <div class="mb-2">
                <a class="font-size-140 line-height-13 text-dark font-weight-bold text-decoration-none" href="<?= $question->get_URL($this->lang) ?>">
                    <?= $question->title ?>
                </a>
            </div>

            <!-- last_contributor -->
            <?php if (isset($last_contributor)) : ?>

                <div class="media position-relative">
                    <a class="wh-3 mt-1 mr-3 rounded-circle" href="<?= $last_contributor->get_URL($this->lang) ?>">
                        <img src="<?= $last_contributor->get_avatar_URL_medium() ?>" class="wh-3 rounded-circle" alt="<?= $last_contributor->name ?>">
                    </a>
                    <div class="media-body line-height-12">
                        <a class="semi-small text-secondary text-decoration-none" href="<?= $last_contributor->get_URL($this->lang) ?>"><?= $last_contributor->name ?></a>

                        <span class="semi-small text-black-50">
                            &middot;
                        </span>

                        <?php if ($last_contributor->signature) : ?>
                            <span class="semi-small">
                                <?= $last_contributor->signature ?>
                            </span>
                        <?php else : ?>
                            <span class="semi-small text-black-50">
                                @<?= $last_contributor->username ?>
                            </span>
                        <?php endif; ?>


                        <div class="small text-black-50 mt-2">
                            <?= $this->translator->get('main', 'item__top_question', 'updated_answer') ?>: <?= \Humanizer\DateTime::humanize_timestamp($this->lang, $question->answer->updatedAt) ?>
                        </div>
                    </div>
                </div>
            <?php endif; ?>

            <?php if ($question->imageBaseName) : ?>
                <a class="d-block my-3" href="<?= $question->get_URL($this->lang) ?>">
                    <img class="img-fluid" src="<?= $question->get_image_URL_medium($this->lang) ?>" alt="<?= $question->title ?>">
                </a>
            <?php endif; ?>

            <!-- answer text -->
            <?php if (mb_strlen($question->answer->text)) : ?>
                <div class="my-3">
                    <?= mb_substr($question->answer->text, 0, 150) ?><?= (mb_strlen($question->answer->text) > 150) ? '&hellip;' : '' ?>
                    <?php if (mb_strlen($question->answer->text) > 150) : ?>
                        <a class="text-secondary semi-small my-3" href="<?= $question->get_URL($this->lang) ?>">
                            (<?= $this->translator->get('main', 'item__top_question', 'read_more') ?>)
                        </a>
                    <?php endif; ?>
                </div>
            <?php endif; ?>
            <!-- / answer text -->

            <div class="mt-2 text-secondary">

                <?php if (count($contributors)) : ?>
                    <?php foreach ($contributors as $contributor) : ?>
                        <a class="wh-28px rounded-circle" href="<?= $contributor->get_URL($this->lang) ?>"><img src="<?= $contributor->get_avatar_URL_medium() ?>" class="wh-28px rounded-circle" alt="<?= $contributor->name ?>" title="<?= $contributor->name ?>"></a>
                    <?php endforeach; ?>
                    <!-- <a class="semi-small text-black-50" href="#">
                        +2
                    </a> -->

                <?php endif; ?>



                <span class="mx-1 text-muted ">&middot;</span>


                <!-- time to read -->
                <?php if (strlen($question->answer->text)) : ?>
                    <span class="semi-small text-black-50" title="<?= $this->translator->get('Minutes to read') ?>">
                        <i class="material-icons md-14">access_time</i>
                        <?= $question->get_minutes_to_read() ?>&nbsp;<?= $this->translator->get('min') ?>
                    </span>
                <?php endif; ?>
                <!-- / time to read -->

            </div>
        </div>
        <!-- / question item -->

    <?php endforeach; ?>

<?php endif; ?>